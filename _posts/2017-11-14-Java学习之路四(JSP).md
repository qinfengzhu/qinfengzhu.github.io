---
layout: post
title: "Java学习之路四(JSP)"
date: 2017-11-14   
tag: java学习之路 
---

### 什么是JSP 

JSP文件的本质是Servlet,JSP与Servlet不同的是，JSP是专门用于进行数据展示的Servlet,其有特殊的写法。而普通的Servlet是用于完成业务逻辑处理的。由于Servlet是运行在单例多线程环境下的，所以JSP同样是运行在单例多线程环境下。

将JSP页面翻译为Servlet的过程，是由Tomcat完成。在Tomcat中内置了一个JSP翻译引擎，当第一次访问该JSP页面时，翻译引擎会将JSP页面翻译为Servlet的.Java文件，再将其编译为.class文件进行运行。SUN公司定制的JavaEE规范中包含两个很重要的子规范：Servlet规范，及JSP规范。其中JSP规范中就包含了如何将JSP页面翻译为Servlet。例如，JSP页面中的HTML、CSS、JavaScript以及普通文本部分，均会被翻译到out.Write()中。Tomcat中的Jsp翻译引擎，就遵循了这个Jsp规范。


### JSP基础

* JSP注释

JSP注释与html注释区别，Jsp注释是客户端看不见的，html注释客户端看的见。所以一般重要注释是放在JSP注释中的。

* JSP的Java代码块

JSP的Java代码块也称为Jsp小脚本，以`<% %>`括起来的部分，其中可以编写Java代码，编写在Java代码块中的代码，会被JSP翻译引擎将其置入到Servlet的_jspService()方法中作为方法中的Java语句出现。所以，其中存放的必须是以分号结尾的Java语句。

声明的变量是不能添加权限访问控制符的；不能定义方法；不能定义静态语句块。

* JSP的声明语句块

在JSP页面中使用`<%! %>` 括起来的部分，称为声明语句块。声明语句块中的内容，将被JSP引擎翻译到Servlet类体重，没有包含到哪个具体方法中。所以在JSP的声明语句块中就可声明实例变量、实例方法、静态方法、静态代码块等内容。并且，这些内容均可被JSP的Java代码块中代码访问。因为它们原本就是一个Servlet类中的代码。在JSP的声明语句块中，是不能编写普通的Java语句。

* JSP的表达式块

`<%= %>` 

### 内置对象

在JSP的Java代码块、表达式块等中可以直接使用的引用，称为JSP的内置对象。常用的内置对象有九个，分别是 `pageContext` , `request`  ,`session` ,`application` ,`response` ,`config`  ,`out` ,`page` ,`exception` 这九个对象在JSP的Java代码块、表达式块中可以直接使用。

* JSP指令

JSP指令的作用是为当前页面做一些基本的属性设置，为当前的页面运行提供基本环境。根据功能的不同，JSP中包含三类指令：page指令，即页面指令；include指令，即包含指令；taglib指令，即标签库指令。语法格式 `<%@ 指令名称 属性名=属性值 属性名=属性值 ...... %>`

```java
//page指令
<%@ page pageEncoding="UTF-8" language="java" contentType="text/html;charset=UTF-8" import="java.util.Date" errorPage="/error.jsp" isErrorPage="true" session="true" %>
//pageEncoding -> response.setContentType("text/html;charset=UTF-8") 
//contentType-> response.setContentType("text/html;charset=UTF-8") 这里可以自由设置是否为 text/html
//import-> import java.util.Date; 导入类
//errorPage-> 当页面出现错误的时候，跳转的页面
//isErrorPage-> 错误页面可以打印出错误信息,exception.getMessage() 

//include指令
<%@ include file="/products.jsp" %>

```


### JSP动作

在JSP页面中使用Java代码块、表达式块等内容，会使JSP页面看起来很乱，为了使JSP页面看的简洁明了，为了简化Java代码，一般情况下，我们尽量少的使用Java代码块与表达式块，取而代之的则是使用EL表达式、JSTL标签，及JSP动作。JSP动作的语法格式`<jsp:动作名称 属性名称=属性值></jsp:动作名称>`

```java
//forward动作
//include动作
```